<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ›ãƒ¼ãƒ  | é£Ÿè–¬AI</title>
    <style>
        body { font-family: sans-serif; background-color: #fdfaf1; padding: 20px; color: #333; }
        .container { max-width: 500px; margin: auto; }
        .welcome-box { background: white; padding: 25px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: center; }
        .week-badge { background: #4a6741; color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; display: inline-block; margin-bottom: 10px; }
        h1 { font-size: 1.3rem; margin: 10px 0; color: #4a6741; }
        .point-card { background: #f0f4ee; padding: 15px; border-radius: 12px; margin: 20px 0; text-align: left; font-size: 0.9rem; border-left: 5px solid #4a6741; }
        .nav-buttons { display: grid; gap: 15px; margin-top: 30px; }
        .btn { padding: 18px; border-radius: 15px; border: none; font-weight: bold; cursor: pointer; text-decoration: none; text-align: center; font-size: 1rem; }
        .btn-main { background: #4a6741; color: white; box-shadow: 0 4px 10px rgba(74,103,65,0.3); }
        .btn-sub { background: white; color: #4a6741; border: 2px solid #4a6741; }
    </style>
</head>
<body>
    <div class="container">
        <div class="welcome-box">
            <div id="weekNo" class="week-badge">èª­ã¿è¾¼ã¿ä¸­...</div>
            <h1 id="userName">ã“ã‚“ã«ã¡ã¯ï¼</h1>
            <p style="font-size:0.9rem; color:#666;">ä»Šæ—¥ã®å¿ƒã¨ä½“ã®ã”æ©Ÿå«Œã¯ã„ã‹ãŒã§ã™ã‹ï¼Ÿ</p>

            <div class="point-card">
                <strong style="color:#4a6741;">ğŸ’¡ ä»Šé€±ã®é£Ÿè–¬Point</strong>
                <p id="learningPoint" style="margin-top:8px; line-height:1.5;">ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã¾ã™...</p>
            </div>

            <div class="nav-buttons">
                <a href="/daily" class="btn btn-main">ğŸ´ ä»Šæ—¥ã®é£Ÿäº‹ã¨èˆŒã‚’è¨˜éŒ²ã™ã‚‹</a>
                <a href="/weekly" class="btn btn-sub">ğŸ“Š ä»Šé€±ã®ç©ã¿é‡ã­ã‚’è¦‹ã‚‹</a>
            </div>
        </div>
    </div>

    <script>
        const userId = "U12345"; // å®Ÿéš›ã«ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«å‹•çš„ã«å–å¾—
        window.onload = async () => {
            try {
                // APIã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆé€±æ•°ãƒ»å­¦ã³æ–‡ï¼‰ã‚’å–å¾—
                const res = await fetch(`/.netlify/functions/get-summary?user_id=${userId}`);
                const data = await res.json();
                
                document.getElementById('weekNo').innerText = `ç¬¬ ${data.week_no} é€±ç›®`;
                document.getElementById('learningPoint').innerText = data.weekly_learning_text || "ä»Šæ—¥ã®ã‚ãªãŸã«ã´ã£ãŸã‚Šã®é£Ÿè–¬ã‚’ç¶šã‘ã¾ã—ã‚‡ã†ã€‚";
            } catch (err) {
                console.error("ãƒ‡ãƒ¼ã‚¿å–å¾—å¤±æ•—", err);
            }
        };
    </script>
</body>
</html>
