<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä»Šæ—¥ã®è¨˜éŒ² | é£Ÿè–¬AI</title>
    <style>
        :root { --main: #4a6741; --bg: #fdfaf1; }
        body { font-family: sans-serif; background: var(--bg); padding: 20px; font-size: 1.2rem; }
        .container { max-width: 550px; margin: auto; background: white; padding: 35px; border-radius: 35px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .char-box { text-align: center; background: #f9fbf8; padding: 20px; border-radius: 25px; margin-bottom: 25px; }
        .char-img { font-size: 80px; } /* äººé–“ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ ğŸ§‘â€ğŸ³ */
        h1 { color: var(--main); text-align: center; font-size: 1.8rem; margin: 0 0 20px; }
        label { font-weight: bold; color: var(--main); display: block; margin: 25px 0 10px; font-size: 1.4rem; }
        select, input[type="file"] { width: 100%; padding: 20px; border-radius: 15px; border: 2px solid #eee; font-size: 1.3rem; margin-bottom: 20px; box-sizing: border-box; }
        .q-card { border-bottom: 1px solid #f0f0f0; padding: 20px 0; display: flex; align-items: center; justify-content: space-between; }
        .q-text { flex: 1; font-size: 1.2rem; }
        .q-check { width: 40px; height: 40px; transform: scale(2.0); accent-color: var(--main); }
        .btn-submit { background: var(--main); color: white; width: 100%; padding: 25px; border-radius: 20px; border: none; font-weight: bold; font-size: 1.6rem; cursor: pointer; margin-top: 40px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="char-box">
            <span class="char-img">ğŸ§‘â€ğŸ³</span>
            <p style="font-weight:bold; color:#4a6741;">ã“ã‚“ã«ã¡ã¯ï¼<br>ä»Šæ—¥ã®ã‚ãªãŸã®é£Ÿäº‹ã‚’æ•™ãˆã¦ã­ã€‚</p>
        </div>
        <h1>ğŸ´ ä»Šæ—¥ã®é£Ÿè–¬è¨˜éŒ²</h1>
        <form id="dailyForm">
            <label>é£Ÿäº‹ã®ç›®çš„</label>
            <select name="meal_purpose" required>
                <option value="health">ä½“ã‚’æ•´ãˆã‚‹ï¼ˆå¥åº·ï¼‰</option>
                <option value="enjoy">æ™‚é–“ã‚’æ¥½ã—ã‚€ï¼ˆå–œã³ï¼‰</option>
                <option value="social">äººã¨éã”ã™ï¼ˆäº¤æµï¼‰</option>
            </select>

            <label>ğŸ“¸ å†™çœŸï¼ˆé£Ÿäº‹ãƒ»èˆŒï¼‰</label>
            <input type="file" name="photos" accept="image/*" multiple required>

            <label>âœï¸ ä»Šæ—¥ã®ç¿’æ…£ãƒã‚§ãƒƒã‚¯</label>
            <div id="questions">
                <!-- Q1-Q14 å…¨å•è¨º [3] -->
                <script>
                    const qs = [
                        "Q1. ã‚¿ãƒãƒ»ãƒŠãƒƒãƒ„ï¼ˆ5gï¼‰é£Ÿã¹ãŸï¼Ÿ", "Q2. é‡èœï¼ˆä¸¡æ‰‹åˆ†ï¼‰é£Ÿã¹ãŸï¼Ÿ", "Q3. æ—¬ã®é‡èœã‚’é£Ÿã¹ãŸï¼Ÿ",
                        "Q4. æµ·è—»é¡ã‚’é£Ÿã¹ãŸï¼Ÿ", "Q5. ã‚­ãƒã‚³é¡ã‚’é£Ÿã¹ãŸï¼Ÿ", "Q6. ãŸã‚“ã±ãè³ªï¼ˆæ‰‹ã®ã²ã‚‰å¤§ï¼‰é£Ÿã¹ãŸï¼Ÿ",
                        "Q7. é­šã‚’é£Ÿã¹ãŸï¼Ÿ", "Q8. å‘³å™Œæ±ã‚’é£²ã‚“ã ï¼Ÿ", "Q9. ç©ºè…¹ã‚’æ„Ÿã˜ã¦ã‹ã‚‰é£Ÿã¹ãŸï¼Ÿ",
                        "Q10. 30å›ä»¥ä¸Šã‚ˆãå™›ã‚“ã§é£Ÿã¹ãŸï¼Ÿ", "Q11. å°éº¦è£½å“ã‚’é£Ÿã¹ãŸï¼Ÿ", "Q12. ç”˜ã„ã‚‚ã®ãƒ»é£²ã¿ç‰©ã‚’ã¨ã£ãŸï¼Ÿ",
                        "Q13. æšã’ç‰©ã‚’é£Ÿã¹ãŸï¼Ÿ", "Q14. ãŠé…’ãƒ»ã‚«ãƒ•ã‚§ã‚¤ãƒ³ï¼ˆ3æ¯ä»¥ä¸Šï¼‰ï¼Ÿ"
                    ];
                    qs.forEach((q, i) => {
                        document.write(`<div class="q-card"><span class="q-text">${q}</span><input type="checkbox" name="Q${i+1}" class="q-check"></div>`);
                    });
                </script>
            </div>
            <button type="submit" class="btn-submit">è¨˜éŒ²ã—ã¦è¨ºæ–­ã‚’ã¿ã‚‹</button>
        </form>
    </div>

    <script>
        document.getElementById('dailyForm').onsubmit = async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            btn.innerText = "è¨ºæ–­ä¸­..."; btn.disabled = true;

            const formData = new FormData(e.target);
            try {
                const res = await fetch('/.netlify/functions/daily-submit', { method: 'POST', body: formData });
                const data = await res.json();
                // é€ä¿¡æˆåŠŸå¾Œã€è¨ºæ–­çµæœãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã™ã‚‹ [2]
                window.location.href = `/result?log_id=${data.log_id}`;
            } catch (err) {
                alert("é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚é›»æ³¢ã®è‰¯ã„å ´æ‰€ã§å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚");
                btn.innerText = "è¨˜éŒ²ã—ã¦è¨ºæ–­ã‚’ã¿ã‚‹"; btn.disabled = false;
            }
        };
    </script>
</body>
</html>
